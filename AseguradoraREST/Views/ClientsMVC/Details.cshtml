@using AseguradoraREST.Models
@model AseguradoraREST.Models.Client

@{
    ViewBag.Title = "Client Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details</h2>

<div>
    <h4>Client</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.DNI)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.DNI)
        </dd>
        <dd>

            @if (Model.Incidences.Count > 0)
            {
                <br />
                <b>Lista de incidencias</b>
                <table class="table">

                    <th>
                        Name
                    </th>
                    <th>
                        Description
                    </th>
                    <th></th>

                    @foreach (var incidence in Model.Incidences)
                    {

                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => incidence.name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => @incidence.description)
                            </td>
                            <td>
                                @Html.ActionLink("Show Details", "Details", "Incidences", new { id = incidence.Id }, null)
                        </td>
                    </tr>
                    }

                </table>
            }
            else
            {
            <dd>
                <b>There are not incidences registeres for this client</b>
            </dd>
            }

        </dl>
    </div>
    <p>
        @Html.ActionLink("Edit", "Edit", new { id = Model.ID }) |
        @Html.ActionLink("Back to List", "Index")
    </p>
